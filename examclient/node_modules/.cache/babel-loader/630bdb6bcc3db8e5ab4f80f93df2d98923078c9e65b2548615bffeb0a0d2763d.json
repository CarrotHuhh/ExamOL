{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: 'Edit',\n  data() {\n    return {\n      user: {},\n      newName: '',\n      newAccount: '',\n      password: '',\n      oldPassword: '',\n      newPassword: '',\n      confirmNewPassword: '',\n      editNameSelect: false,\n      editAccountSelect: false,\n      editPasswordSelect: false\n    };\n  },\n  created() {\n    this.user = this.$getSessionStorage('user');\n  },\n  methods: {\n    toMyIndex() {\n      this.$router.push({\n        path: '/myIndex'\n      });\n    },\n    toEditName() {\n      this.editNameSelect = !this.editNameSelect;\n    },\n    toEditAccount() {\n      this.editAccountSelect = !this.editAccountSelect;\n    },\n    toEditPassword() {\n      this.editPasswordSelect = !this.editPasswordSelect;\n    },\n    editName() {\n      if (this.newName == '') {\n        alert('请输入修改后的姓名！');\n        return;\n      }\n      this.$axios.post('UserController/updateusername', this.$qs.stringify({\n        useraccount: this.user.useraccount,\n        username: this.newName\n      })).then(response => {\n        var result = response.data;\n        if (result > 0) {\n          alert('用户姓名修改成功！');\n          console.log('姓名修改成功');\n        } else {\n          console.log('姓名修改失败');\n        }\n      }).catch(error => {\n        console.error(error);\n      });\n    },\n    editAccount() {\n      if (this.newAccount == null) {\n        alert('修改后的账号不能为空！');\n        return;\n      }\n      if (this.password == null) {\n        alert('请输入密码进行验证！');\n        return;\n      }\n      this.$axios.post('UserController/getuser', this.$qs.stringify({\n        useraccount: this.user.useraccount,\n        password: this.password\n      })).then(response => {\n        var result = response.data;\n        if (result != null) {\n          console.log('密码正确');\n          this.$axios.post('UserController/updateuseraccount', this.$qs.stringify({\n            useraccount: this.user.useraccount,\n            newaccount: this.newAccount\n          })).then(response => {\n            var result = response.data;\n            if (result > 0) {\n              alert('用户账号修改成功！');\n              console.log('账号修改成功');\n            } else {\n              console.log('账号修改失败');\n            }\n          }).catch(error => {\n            console.error(error);\n          });\n        } else {\n          alert('密码错误！修改账号失败！');\n          console.log('密码错误');\n        }\n      }).catch(error => {\n        console.error(error);\n      });\n    },\n    editPassword() {\n      if (this.password == null) {\n        alert('请输入密码进行验证！');\n        return;\n      }\n      if (this.newPassword == null) {\n        alert('修改后的密码不能为空！');\n        return;\n      }\n      if (this.confirmNewPassword == null) {\n        alert('请再次输入修改后的密码进行验证！');\n        return;\n      }\n      if (this.confirmNewPassword != this.newPassword) {\n        alert('两次输入的新密码不一致！');\n        return;\n      }\n      this.$axios.post('UserController/getuser', this.$qs.stringify({\n        useraccount: this.user.useraccount,\n        password: this.password\n      })).then(response => {\n        var result = response.data;\n        if (result != null) {\n          console.log('密码正确');\n          this.$axios.post('UserController/updatepassword', this.$qs.stringify({\n            useraccount: this.user.useraccount,\n            password: this.newPassword\n          })).then(response => {\n            var result = response.data;\n            if (result > 0) {\n              alert('用户密码修改成功！');\n              console.log('密码修改成功');\n            } else {\n              console.log('密码修改失败');\n            }\n          }).catch(error => {\n            console.error(error);\n          });\n        } else {\n          alert('密码错误！修改密码失败！');\n          console.log('密码错误');\n        }\n      }).catch(error => {\n        console.error(error);\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";AAqFA;EACAA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;EACA;EACAC;IACAC;MACA;QAAAC;MAAA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;QACAC;QACA;MACA;MAEA;QACAC;QACAC;MACA;QACA;QAEA;UACAF;UACAG;QACA,OACA;UACAA;QACA;MACA;QACAA;MACA;IACA;IACAC;MACA;QACAJ;QACA;MACA;MACA;QACAA;QACA;MACA;MAEA;QACAC;QACAhB;MACA;QACA;QAEA;UACAkB;UACA;YACAF;YACAI;UACA;YACA;YAEA;cACAL;cACAG;YACA,OACA;cACAA;YACA;UACA;YACAA;UACA;QACA,OACA;UACAH;UACAG;QACA;MACA;QACAA;MACA;IACA;IACAG;MACA;QACAN;QACA;MACA;MACA;QACAA;QACA;MACA;MACA;QACAA;QACA;MACA;MACA;QACAA;QACA;MACA;MAEA;QACAC;QACAhB;MACA;QACA;QAEA;UACAkB;UACA;YACAF;YACAhB;UACA;YACA;YAEA;cACAe;cACAG;YACA,OACA;cACAA;YACA;UACA;YACAA;UACA;QACA,OACA;UACAH;UACAG;QACA;MACA;QACAA;MACA;IACA;EACA;AACA","names":["name","data","user","newName","newAccount","password","oldPassword","newPassword","confirmNewPassword","editNameSelect","editAccountSelect","editPasswordSelect","created","methods","toMyIndex","path","toEditName","toEditAccount","toEditPassword","editName","alert","useraccount","username","console","editAccount","newaccount","editPassword"],"sourceRoot":"src/views","sources":["Edit.vue"],"sourcesContent":["<template>\r\n\t<div class=\"wrapper\">\r\n\t\t<div class=\"header-box\">\r\n\t\t\t<i class=\"fa fa-chevron-left\" @click=\"toMyIndex\"></i>\r\n\t\t\t<p>修改信息</p>\r\n\t\t\t<i class=\"fa fa-chevron-left\"></i>\r\n\t\t</div>\r\n\t\t\r\n\t\t<ul class=\"operation-box\">\r\n\t\t\t<li>\r\n\t\t\t\t<div class=\"operation-header\" @click=\"toEditName\" v-show=\"!editNameSelect\">\r\n\t\t\t\t\t<p>修改姓名</p>\r\n\t\t\t\t\t<i class=\"fa fa-caret-right\"></i>\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t<div class=\"content-box\" v-show=\"editNameSelect\">\r\n\t\t\t\t\t<p>修改姓名：</p>\r\n\t\t\t\t\t<input type=\"text\" v-model=\"newName\" placeholder=\"请输入修改后的姓名\">\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t<div class=\"bottom-box\" v-show=\"editNameSelect\">\r\n\t\t\t\t\t<div class=\"button-box\" @click=\"editName\">\r\n\t\t\t\t\t\t确认提交\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<i class=\"fa fa-caret-up\" @click=\"toEditName\"></i>\r\n\t\t\t\t</div>\r\n\t\t\t</li>\r\n\t\t\t\r\n\t\t\t<li>\r\n\t\t\t\t<div class=\"operation-header\" @click=\"toEditAccount\" v-show=\"!editAccountSelect\">\r\n\t\t\t\t\t<p>修改账号</p>\r\n\t\t\t\t\t<i class=\"fa fa-caret-right\"></i>\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t<div class=\"content-box\" v-show=\"editAccountSelect\">\r\n\t\t\t\t\t<p>修改账号：</p>\r\n\t\t\t\t\t<input type=\"text\" v-model=\"newAccount\" placeholder=\"请输入修改后的账号\">\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t<div class=\"content-box\" v-show=\"editAccountSelect\">\r\n\t\t\t\t\t<p>请输入密码进行验证：</p>\r\n\t\t\t\t\t<input type=\"password\" v-model=\"password\" placeholder=\"请输入密码\">\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t<div class=\"bottom-box\" v-show=\"editAccountSelect\">\r\n\t\t\t\t\t<div class=\"button-box\" @click=\"editAccount\">\r\n\t\t\t\t\t\t确认提交\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<i class=\"fa fa-caret-up\" @click=\"toEditAccount\"></i>\r\n\t\t\t\t</div>\r\n\t\t\t</li>\r\n\t\t\t\r\n\t\t\t<li>\r\n\t\t\t\t<div class=\"operation-header\" @click=\"toEditPassword\" v-show=\"!editPasswordSelect\">\r\n\t\t\t\t\t<p>修改密码</p>\r\n\t\t\t\t\t<i class=\"fa fa-caret-right\"></i>\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t<div class=\"content-box\" v-show=\"editPasswordSelect\">\r\n\t\t\t\t\t<p>原密码：</p>\r\n\t\t\t\t\t<input type=\"password\" v-model=\"oldPassword\" placeholder=\"请输入原密码\">\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t<div class=\"content-box\" v-show=\"editPasswordSelect\">\r\n\t\t\t\t\t<p>新密码：</p>\r\n\t\t\t\t\t<input type=\"password\" v-model=\"newPassword\" placeholder=\"请输入修改后的密码\">\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t<div class=\"content-box\" v-show=\"editPasswordSelect\">\r\n\t\t\t\t\t<p>确认新密码：</p>\r\n\t\t\t\t\t<input type=\"password\" v-model=\"confirmNewPassword\" placeholder=\"请再次输入修改后的密码进行确认\">\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t<div class=\"bottom-box\" v-show=\"editPasswordSelect\">\r\n\t\t\t\t\t<div class=\"button-box\">\r\n\t\t\t\t\t\t确认提交\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<i class=\"fa fa-caret-up\" @click=\"toEditPassword\"></i>\r\n\t\t\t\t</div>\r\n\t\t\t</li>\r\n\t\t</ul>\r\n\t</div>\n</template>\n\n<script>\r\n\texport default{\r\n\t\tname:'Edit',\r\n\t\tdata() {\r\n\t\t\treturn{\r\n\t\t\t\tuser:{},\r\n\t\t\t\tnewName:'',\r\n\t\t\t\tnewAccount:'',\r\n\t\t\t\tpassword:'',\r\n\t\t\t\toldPassword:'',\r\n\t\t\t\tnewPassword:'',\r\n\t\t\t\tconfirmNewPassword:'',\r\n\t\t\t\teditNameSelect:false,\r\n\t\t\t\teditAccountSelect:false,\r\n\t\t\t\teditPasswordSelect:false\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.user = this.$getSessionStorage('user');\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\ttoMyIndex(){\r\n\t\t\t\tthis.$router.push({path:'/myIndex'});\r\n\t\t\t},\r\n\t\t\ttoEditName(){\r\n\t\t\t\tthis.editNameSelect = !this.editNameSelect;\r\n\t\t\t},\r\n\t\t\ttoEditAccount(){\r\n\t\t\t\tthis.editAccountSelect = !this.editAccountSelect;\r\n\t\t\t},\r\n\t\t\ttoEditPassword(){\r\n\t\t\t\tthis.editPasswordSelect = !this.editPasswordSelect;\r\n\t\t\t},\r\n\t\t\teditName(){\r\n\t\t\t\tif (this.newName == ''){\r\n\t\t\t\t\talert('请输入修改后的姓名！');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.$axios.post('UserController/updateusername', this.$qs.stringify({\r\n\t\t\t\t\tuseraccount: this.user.useraccount,\r\n\t\t\t\t\tusername: this.newName\r\n\t\t\t\t})).then(response=>{\r\n\t\t\t\t\tvar result = response.data;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (result > 0){\r\n\t\t\t\t\t\talert('用户姓名修改成功！')\r\n\t\t\t\t\t\tconsole.log('姓名修改成功');\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tconsole.log('姓名修改失败');\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(error=>{\r\n\t\t\t\t\tconsole.error(error);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\teditAccount(){\r\n\t\t\t\tif (this.newAccount == null){\r\n\t\t\t\t\talert('修改后的账号不能为空！');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.password == null){\r\n\t\t\t\t\talert('请输入密码进行验证！');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.$axios.post('UserController/getuser', this.$qs.stringify({\r\n\t\t\t\t\tuseraccount: this.user.useraccount,\r\n\t\t\t\t\tpassword: this.password\r\n\t\t\t\t})).then(response=>{\r\n\t\t\t\t\tvar result = response.data;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (result != null){\r\n\t\t\t\t\t\tconsole.log('密码正确');\r\n\t\t\t\t\t\tthis.$axios.post('UserController/updateuseraccount', this.$qs.stringify({\r\n\t\t\t\t\t\t\tuseraccount: this.user.useraccount,\r\n\t\t\t\t\t\t\tnewaccount: this.newAccount\r\n\t\t\t\t\t\t})).then(response=>{\r\n\t\t\t\t\t\t\tvar result = response.data;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (result > 0){\r\n\t\t\t\t\t\t\t\talert('用户账号修改成功！')\r\n\t\t\t\t\t\t\t\tconsole.log('账号修改成功');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\tconsole.log('账号修改失败');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}).catch(error=>{\r\n\t\t\t\t\t\t\tconsole.error(error);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\talert('密码错误！修改账号失败！');\r\n\t\t\t\t\t\tconsole.log('密码错误');\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(error=>{\r\n\t\t\t\t\tconsole.error(error);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\teditPassword(){\r\n\t\t\t\tif (this.password == null){\r\n\t\t\t\t\talert('请输入密码进行验证！');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.newPassword == null){\r\n\t\t\t\t\talert('修改后的密码不能为空！');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.confirmNewPassword == null){\r\n\t\t\t\t\talert('请再次输入修改后的密码进行验证！');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.confirmNewPassword != this.newPassword){\r\n\t\t\t\t\talert('两次输入的新密码不一致！');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.$axios.post('UserController/getuser', this.$qs.stringify({\r\n\t\t\t\t\tuseraccount: this.user.useraccount,\r\n\t\t\t\t\tpassword: this.password\r\n\t\t\t\t})).then(response=>{\r\n\t\t\t\t\tvar result = response.data;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (result != null){\r\n\t\t\t\t\t\tconsole.log('密码正确');\r\n\t\t\t\t\t\tthis.$axios.post('UserController/updatepassword', this.$qs.stringify({\r\n\t\t\t\t\t\t\tuseraccount: this.user.useraccount,\r\n\t\t\t\t\t\t\tpassword: this.newPassword\r\n\t\t\t\t\t\t})).then(response=>{\r\n\t\t\t\t\t\t\tvar result = response.data;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (result > 0){\r\n\t\t\t\t\t\t\t\talert('用户密码修改成功！')\r\n\t\t\t\t\t\t\t\tconsole.log('密码修改成功');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\tconsole.log('密码修改失败');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}).catch(error=>{\r\n\t\t\t\t\t\t\tconsole.error(error);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\talert('密码错误！修改密码失败！');\r\n\t\t\t\t\t\tconsole.log('密码错误');\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(error=>{\r\n\t\t\t\t\tconsole.error(error);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\n</script>\n\n<style scoped>\r\n\t/* body{\r\n\t\tbackground-color: #005187;\r\n\t} */\r\n\t\r\n\t.wrapper{\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tbackground-color: #005187;\r\n\t\t-webkit-user-select: none;\r\n\t\tuser-select: none;\r\n\t}\r\n\t\r\n\t\r\n\t/******************************** header *****************************************/\r\n\t.wrapper .header-box{\r\n\t\tmargin: 0vw 8vw 2vw 8vw;\r\n\t\tpadding: 5vh 0vh 5vh 0vh;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 10vw;\r\n\t\tfont-weight: bold;\r\n\t\tletter-spacing: 3vw;\r\n\t}\r\n\t\r\n\t.wrapper .header-box i{\r\n\t\tmargin-top: 1.5vw;\r\n\t}\r\n\t\r\n\t.wrapper .header-box i:first-child{\r\n\t\tcursor: pointer;\r\n\t}\r\n\t\r\n\t.wrapper .header-box i:last-child{\r\n\t\tcolor: #005187;\r\n\t}\r\n\t\r\n\t\r\n\t/******************************** operation list *****************************************/\r\n\t.wrapper .operation-box{\r\n\t\tmin-height: 70.21vh;\r\n\t\tborder-radius: 8vw 8vw 0vw 0vw;\r\n\t\tpadding: 10vw 8vw 8.1vh 8vw;\r\n\t\tbackground-color: #f2f2f6;\r\n\t}\r\n\t\r\n\t.wrapper .operation-box li{\r\n\t\twidth: 84vw;\r\n\t\tbox-sizing: border-box;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\tflex-wrap: wrap;\r\n\t\tpadding: 6vw 8vw 6vw 8vw;\r\n\t\tmargin-bottom: 4vw;\r\n\t\tborder-radius: 4vw;\r\n\t\tbackground-color: #565656;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 5vw;\r\n\t\tfont-weight: bold;\r\n\t\tcursor: pointer;\r\n\t}\r\n\t\r\n\t.wrapper .operation-box li .operation-header{\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\t\r\n\t.wrapper .operation-box li .operation-header i{\r\n\t\tmargin: 0.55vw 0vw 0vw 2vw;\r\n\t}\r\n\t\r\n\t.wrapper .operation-box li .content-box{\r\n\t\twidth: 65vw;\r\n\t\theight: 22vw;\r\n\t\tpadding-bottom: 2vw;\r\n\t}\r\n\t\r\n\t.wrapper .operation-box li .content-box p{\r\n\t\tpadding-bottom: 2.5vw;\r\n\t}\r\n\t\r\n\t.wrapper .operation-box li .content-box input{\r\n\t\twidth: 64vw;\r\n\t\theight: 10vw;\r\n\t\toutline-style: none;\r\n\t\tborder: 0px;\r\n\t\tborder-radius: 2vw;\r\n\t\tfont-size: 4vw;\r\n\t\ttext-indent: 2px;\r\n\t}\r\n\t\r\n\t.wrapper .operation-box li .bottom-box{\r\n\t\twidth: 65vw;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t}\r\n\t\r\n\t.wrapper .operation-box li .bottom-box i{\r\n\t\tmargin-top: 2vw;\r\n\t\tfont-size: 8vw;\r\n\t}\r\n\t\r\n\t.wrapper .operation-box li .bottom-box .button-box{\r\n\t\twidth: 25vw;\r\n\t\theight: 10vw;\r\n\t\tborder-radius: 2vw;\r\n\t\tmargin-top: 2vw;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tbackground-color: limegreen;\r\n\t\tcursor: pointer;\r\n\t}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}